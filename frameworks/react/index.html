
  


<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Stripe Elements Web Components in React</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="preconnect" href="https://ga.jspm.io"/>
  <link rel="preconnect" href="https://unpkg.com"/>

  <link rel="preload" as="style" href="https://ga.jspm.io/npm:open-props@1.1.3/open-props.min.css">
  <link rel="preload" as="style" href="https://unpkg.com/prism-themes@1.9.0/themes/prism-one-dark.min.css" media="(prefers-color-scheme: dark)">
  <link rel="preload" as="style" href="https://unpkg.com/prism-themes@1.9.0/themes/prism-one-light.min.css" media="(prefers-color-scheme: light)">

  
  <link rel="preload" as="document" href="/frames/elements/automatically-posting/" type="text/html">
  
  <link rel="preload" as="document" href="/frames/elements/custom-validation/" type="text/html">
  
  <link rel="preload" as="document" href="/frames/elements/show-error/" type="text/html">
  
  <link rel="preload" as="document" href="/frames/payment-request/fallback-to-elements/" type="text/html">
  
  <link rel="preload" as="document" href="/frames/payment-request/updating-options/" type="text/html">
  
  <link rel="preload" as="document" href="/frames/payment-request/with-display-items-and-shipping-options/" type="text/html">
  
  <link rel="preload" as="document" href="/frames/payment-request/with-display-items/" type="text/html">
  
  <link rel="preload" as="document" href="/frames/payment-request/with-payment-intent/" type="text/html">
  

  <link rel="preconnect" href="https://ga.jspm.io"/>
<link rel="preconnect" href="https://js.stripe.com"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lavadrop/camel-case@0.4.0/camelCase.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lavadrop/kebab-case@3.0.0/kebabCase.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/css-tag.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/base.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/custom-element.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/event-options.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/property.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-all.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-assigned-elements.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-assigned-nodes.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-async.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/state.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/reactive-element.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@pacote/memoize@1.1.6/lib/esm/index.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-element@3.1.1/development/lit-element.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-html@2.1.1/development/directive-helpers.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-html@2.1.1/development/directive.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/class-map.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/if-defined.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/live.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/style-map.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit-html@2.1.1/development/lit-html.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.0.2/directives/if-defined.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.0.2/index.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.1.1/decorators.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.1.1/directive.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.1.1/directives/class-map.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.1.1/directives/if-defined.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.1.1/directives/live.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.1.1/directives/style-map.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:lit@2.1.1/index.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:tslib@2.3.1/tslib.es6.js"/>

  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="modulepreload" href="https://ga.jspm.io/npm:@material/base@14.0.0-canary.a986df922.0/foundation.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/dom@14.0.0-canary.a986df922.0/_/92eae367.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/dom@14.0.0-canary.a986df922.0/ponyfill.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/floating-label@14.0.0-canary.a986df922.0/constants.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/floating-label@14.0.0-canary.a986df922.0/foundation.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/line-ripple@14.0.0-canary.a986df922.0/_/47170644.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/line-ripple@14.0.0-canary.a986df922.0/foundation.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-base@0.25.3/aria-property.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-base@0.26.0-canary.f3e28323.0/base-element.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-base@0.26.0-canary.f3e28323.0/form-element.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-base@0.26.0-canary.f3e28323.0/observer.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-base@0.26.0-canary.f3e28323.0/utils.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-button@0.26.0-canary.f3e28323.0/mwc-button-base.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-button@0.26.0-canary.f3e28323.0/mwc-button.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-button@0.26.0-canary.f3e28323.0/styles.css.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-floating-label@0.26.0-canary.f3e28323.0/mwc-floating-label-directive.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-icon@0.26.0-canary.f3e28323.0/mwc-icon.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-line-ripple@0.26.0-canary.f3e28323.0/mwc-line-ripple-directive.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-notched-outline@0.26.0-canary.f3e28323.0/mwc-notched-outline.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-ripple@0.26.0-canary.f3e28323.0/mwc-ripple-base.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-ripple@0.26.0-canary.f3e28323.0/mwc-ripple.css.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-ripple@0.26.0-canary.f3e28323.0/mwc-ripple.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-ripple@0.26.0-canary.f3e28323.0/ripple-handlers.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-textfield@0.26.0-canary.f3e28323.0/mwc-textfield-base.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-textfield@0.26.0-canary.f3e28323.0/mwc-textfield.css.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/mwc-textfield@0.26.0-canary.f3e28323.0/mwc-textfield.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/notched-outline@14.0.0-canary.a986df922.0/_/ef628a99.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/notched-outline@14.0.0-canary.a986df922.0/foundation.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/ripple@14.0.0-canary.a986df922.0/_/5d3a0e48.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/ripple@14.0.0-canary.a986df922.0/_/d4100ec8.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/ripple@14.0.0-canary.a986df922.0/foundation.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/textfield@14.0.0-canary.a986df922.0/constants.js"/>
<link rel="modulepreload" href="https://ga.jspm.io/npm:@material/textfield@14.0.0-canary.a986df922.0/foundation.js"/>
<script async src="https://ga.jspm.io/npm:es-module-shims@0.12.8/dist/es-module-shims.min.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/stripe-elements/styles.css">
  <link rel="stylesheet" href="https://unpkg.com/prism-themes@1.9.0/themes/prism-one-dark.min.css" media="(prefers-color-scheme: dark)">
  <link rel="stylesheet" href="https://unpkg.com/prism-themes@1.9.0/themes/prism-one-light.min.css" media="(prefers-color-scheme: light)">

  <script type="importmap">{"imports":{"@stripe/stripe-js":"https://ga.jspm.io/npm:@stripe/stripe-js@1.22.0/","@power-elements/stripe-elements":"/stripe-elements/index.js","@lavadrop/camel-case":"https://ga.jspm.io/npm:@lavadrop/camel-case@0.4.0/camelCase.js","@lavadrop/kebab-case":"https://ga.jspm.io/npm:@lavadrop/kebab-case@3.0.0/kebabCase.js","@material/mwc-button":"https://ga.jspm.io/npm:@material/mwc-button@0.26.0-canary.f3e28323.0/mwc-button.js","@material/mwc-dialog":"https://ga.jspm.io/npm:@material/mwc-dialog@1.0.0-canary.66f6244e.0/mwc-dialog.js","@material/mwc-textfield":"https://ga.jspm.io/npm:@material/mwc-textfield@0.26.0-canary.f3e28323.0/mwc-textfield.js","@pacote/memoize":"https://ga.jspm.io/npm:@pacote/memoize@1.1.6/lib/esm/index.js","@power-elements/json-viewer":"https://ga.jspm.io/npm:@power-elements/json-viewer@2.1.1/json-viewer.js","lit":"https://ga.jspm.io/npm:lit@2.0.2/index.js","lit/decorators.js":"https://ga.jspm.io/npm:lit@2.0.2/decorators.js","lit/directives/if-defined.js":"https://ga.jspm.io/npm:lit@2.0.2/directives/if-defined.js","tslib":"https://ga.jspm.io/npm:tslib@2.3.1/tslib.es6.js"},"scopes":{"https://ga.jspm.io/":{"@lit/reactive-element":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/reactive-element.js","@lit/reactive-element/decorators/custom-element.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/custom-element.js","@lit/reactive-element/decorators/event-options.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/event-options.js","@lit/reactive-element/decorators/property.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/property.js","@lit/reactive-element/decorators/query-all.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-all.js","@lit/reactive-element/decorators/query-assigned-elements.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-assigned-elements.js","@lit/reactive-element/decorators/query-assigned-nodes.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-assigned-nodes.js","@lit/reactive-element/decorators/query-async.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query-async.js","@lit/reactive-element/decorators/query.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/query.js","@lit/reactive-element/decorators/state.js":"https://ga.jspm.io/npm:@lit/reactive-element@1.1.2/development/decorators/state.js","@material/base/foundation":"https://ga.jspm.io/npm:@material/base@14.0.0-canary.a986df922.0/foundation.js","@material/dialog/constants.js":"https://ga.jspm.io/npm:@material/dialog@6.0.0-canary.781434a92.0/constants.js","@material/dialog/foundation.js":"https://ga.jspm.io/npm:@material/dialog@6.0.0-canary.781434a92.0/foundation.js","@material/dom/events":"https://ga.jspm.io/npm:@material/dom@6.0.0-canary.781434a92.0/events.js","@material/dom/ponyfill":"https://ga.jspm.io/npm:@material/dom@14.0.0-canary.a986df922.0/ponyfill.js","@material/floating-label/foundation":"https://ga.jspm.io/npm:@material/floating-label@14.0.0-canary.a986df922.0/foundation.js","@material/line-ripple/foundation":"https://ga.jspm.io/npm:@material/line-ripple@14.0.0-canary.a986df922.0/foundation.js","@material/mwc-base/aria-property":"https://ga.jspm.io/npm:@material/mwc-base@0.25.3/aria-property.js","@material/mwc-base/base-element":"https://ga.jspm.io/npm:@material/mwc-base@0.26.0-canary.f3e28323.0/base-element.js","@material/mwc-base/base-element.js":"https://ga.jspm.io/npm:@material/mwc-base@1.0.0-canary.66f6244e.0/base-element.js","@material/mwc-base/form-element":"https://ga.jspm.io/npm:@material/mwc-base@0.26.0-canary.f3e28323.0/form-element.js","@material/mwc-base/observer":"https://ga.jspm.io/npm:@material/mwc-base@0.26.0-canary.f3e28323.0/observer.js","@material/mwc-floating-label":"https://ga.jspm.io/npm:@material/mwc-floating-label@0.26.0-canary.f3e28323.0/mwc-floating-label-directive.js","@material/mwc-icon/mwc-icon":"https://ga.jspm.io/npm:@material/mwc-icon@0.26.0-canary.f3e28323.0/mwc-icon.js","@material/mwc-line-ripple":"https://ga.jspm.io/npm:@material/mwc-line-ripple@0.26.0-canary.f3e28323.0/mwc-line-ripple-directive.js","@material/mwc-notched-outline":"https://ga.jspm.io/npm:@material/mwc-notched-outline@0.26.0-canary.f3e28323.0/mwc-notched-outline.js","@material/mwc-ripple/mwc-ripple":"https://ga.jspm.io/npm:@material/mwc-ripple@0.26.0-canary.f3e28323.0/mwc-ripple.js","@material/mwc-ripple/ripple-handlers":"https://ga.jspm.io/npm:@material/mwc-ripple@0.26.0-canary.f3e28323.0/ripple-handlers.js","@material/notched-outline/foundation":"https://ga.jspm.io/npm:@material/notched-outline@14.0.0-canary.a986df922.0/foundation.js","@material/ripple/foundation":"https://ga.jspm.io/npm:@material/ripple@14.0.0-canary.a986df922.0/foundation.js","@material/textfield/foundation":"https://ga.jspm.io/npm:@material/textfield@14.0.0-canary.a986df922.0/foundation.js","blocking-elements":"https://ga.jspm.io/npm:blocking-elements@0.1.1/dist/blocking-elements.js","lit":"https://ga.jspm.io/npm:lit@2.1.1/index.js","lit-element":"https://ga.jspm.io/npm:lit-element@2.5.1/lit-element.js","lit-element/lit-element.js":"https://ga.jspm.io/npm:lit-element@3.1.1/development/lit-element.js","lit-html":"https://ga.jspm.io/npm:lit-html@2.1.1/development/lit-html.js","lit-html/directive.js":"https://ga.jspm.io/npm:lit-html@2.1.1/development/directive.js","lit-html/directives/class-map":"https://ga.jspm.io/npm:lit-html@1.4.1/directives/class-map.js","lit-html/directives/class-map.js":"https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/class-map.js","lit-html/directives/if-defined.js":"https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/if-defined.js","lit-html/directives/live.js":"https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/live.js","lit-html/directives/style-map.js":"https://ga.jspm.io/npm:lit-html@2.1.1/development/directives/style-map.js","lit-html/lib/shady-render.js":"https://ga.jspm.io/npm:lit-html@1.4.1/lib/shady-render.js","lit-html/lit-html.js":"https://ga.jspm.io/npm:lit-html@1.4.1/lit-html.js","lit/decorators.js":"https://ga.jspm.io/npm:lit@2.1.1/decorators.js","lit/directive.js":"https://ga.jspm.io/npm:lit@2.1.1/directive.js","lit/directives/class-map.js":"https://ga.jspm.io/npm:lit@2.1.1/directives/class-map.js","lit/directives/if-defined.js":"https://ga.jspm.io/npm:lit@2.1.1/directives/if-defined.js","lit/directives/live.js":"https://ga.jspm.io/npm:lit@2.1.1/directives/live.js","lit/directives/style-map.js":"https://ga.jspm.io/npm:lit@2.1.1/directives/style-map.js","tslib":"https://ga.jspm.io/npm:tslib@1.14.1/tslib.es6.js","wicg-inert":"https://ga.jspm.io/npm:wicg-inert@3.1.1/dist/inert.js"},"https://ga.jspm.io/npm:@material/dialog@6.0.0-canary.781434a92.0/":{"@material/base/foundation":"https://ga.jspm.io/npm:@material/base@6.0.0-canary.781434a92.0/foundation.js"},"https://ga.jspm.io/npm:@material/mwc-base@1.0.0-canary.66f6244e.0/":{"@material/dom/ponyfill":"https://ga.jspm.io/npm:@material/dom@6.0.0-canary.781434a92.0/ponyfill.js"},"https://ga.jspm.io/npm:@material/mwc-dialog@1.0.0-canary.66f6244e.0/":{"@material/dom/ponyfill":"https://ga.jspm.io/npm:@material/dom@6.0.0-canary.781434a92.0/ponyfill.js"}}}</script>
</head>
<body>
  <header><h1>Stripe Elements Web Components in React</h1></header>
  <aside><nav class="toc" >
        <ol><li><a href="#%3Cstripe-elements%3E">&lt;stripe-elements&gt;</a></li><li><a href="#%3Cstripe-payment-request%3E">&lt;stripe-payment-request&gt;</a></li></ol>
      </nav></aside>
  <main>
<h2 id="%3Cstripe-elements%3E" tabindex="-1"><code>&lt;stripe-elements&gt;</code></h2>
<iframe
        src="https://codesandbox.io/embed/23zw8?view=preview"
        style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
        allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb"
        sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">PUBLISHABLE_KEY</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./config'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">"./styles.css"</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token operator">=></span> fns<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">isDisabled</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> complete<span class="token punctuation">,</span> empty <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">!</span>complete <span class="token operator">||</span> empty<span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">getTarget</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token punctuation">.</span>target <span class="token operator">??</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">getDetail</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token punctuation">.</span>detail <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">getToken</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token punctuation">.</span>token <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> stripeRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> viewerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> buttonRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>disabled<span class="token punctuation">,</span> setDisabled<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>token<span class="token punctuation">,</span> setToken<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> onChange <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>setDisabled<span class="token punctuation">,</span> isDisabled<span class="token punctuation">,</span> getTarget<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> onError <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>setError<span class="token punctuation">,</span> getDetail<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> onToken <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>setToken<span class="token punctuation">,</span> getToken<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span><br>    stripeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>getToken<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>setToken<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    stripeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> onChange<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    stripeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> onError<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    stripeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">,</span> onToken<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    buttonRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> onClick<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    buttonRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>disabled <span class="token operator">=</span> disabled<span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">||</span> error<span class="token punctuation">)</span> viewerRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>object <span class="token operator">=</span> token<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stripe-elements</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>stripeRef<span class="token punctuation">}</span></span> <span class="token attr-name">publishable-key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">PUBLISHABLE_KEY</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"><br>      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mwc-button</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>buttonRef<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Submit</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mwc-button</span><span class="token punctuation">></span></span><span class="token plain-text"><br>      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>json-viewer</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>viewerRef<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="%3Cstripe-payment-request%3E" tabindex="-1"><code>&lt;stripe-payment-request&gt;</code></h2>
<iframe
        src="https://codesandbox.io/embed/0kktv?view=preview"
        style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
        allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb"
        sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">PUBLISHABLE_KEY</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./config'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">"./styles.css"</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token operator">=></span> fns<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">getDetail</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token punctuation">.</span>detail <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">getPaymentMethod</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token punctuation">.</span>paymentMethod <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> stripeRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> viewerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>paymentMethod<span class="token punctuation">,</span> setPaymentMethod<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> onError <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>setError<span class="token punctuation">,</span> getDetail<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> onPaymentMethod <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>setPaymentMethod<span class="token punctuation">,</span> getPaymentMethod<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    stripeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> onError<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    stripeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"payment-method"</span><span class="token punctuation">,</span> onPaymentMethod<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>paymentMethod <span class="token operator">||</span> error<span class="token punctuation">)</span> viewerRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>object <span class="token operator">=</span> paymentMethod<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stripe-payment-request</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>stripeRef<span class="token punctuation">}</span></span> <span class="token attr-name">publishable-key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">PUBLISHABLE_KEY</span><span class="token punctuation">}</span></span><br>        <span class="token attr-name">generate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>payment-method<span class="token punctuation">"</span></span><br>        <span class="token attr-name">request-payer-name</span><br>        <span class="token attr-name">request-payer-email</span><br>        <span class="token attr-name">request-payer-phone</span><br>        <span class="token attr-name">amount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>326<span class="token punctuation">"</span></span><br>        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Double Double<span class="token punctuation">"</span></span><br>        <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CA<span class="token punctuation">"</span></span><br>        <span class="token attr-name">currency</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cad<span class="token punctuation">"</span></span><br>      <span class="token punctuation">/></span></span><span class="token plain-text"><br>      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>json-viewer</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>viewerRef<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

</main>
  <script type="module" src="/stripe-elements/main.js"></script>
</body>
</html>
